"use strict";(self.webpackChunkJobApp=self.webpackChunkJobApp||[]).push([[556],{6556:(b,f,s)=>{s.r(f),s.d(f,{ProfileComponent:()=>F});var m=s(5694),t=s(4341),c=s(4968),p=s(177),h=s(2823),e=s(4438),d=s(3664),u=s(2130),_=s(1422),v=s(6554);const g=["uploadfile"],E=n=>({"cursor-pointer img_remove":n}),P=n=>({disabled:n});let F=(()=>{class n{constructor(o,r,i,l,a){this.authService=o,this.toasterService=r,this.formBuilder=i,this.userService=l,this.spinner=a,this.validationMessage=c.QC,this.profileSrc=null,this.profileId=null}ngOnInit(){this.createForm()}createForm(){this.profileForm=this.formBuilder.group({name:["",[t.k0.required,t.k0.minLength(3)]],email:[{value:"",disable:!0},[t.k0.required,t.k0.pattern(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)]],location:["",t.k0.required],exprience:[""],projects:[""],skills:[""]}),this.getProfile()}getProfile(){this.spinner.show(),this.userService.getProfile().subscribe(o=>{if(o&&o.success){let r=o.user;this.profileId=r?.profileId||null,this.profileForm.patchValue({name:r?.name,email:r?.email,location:r?.location,exprience:r?.exprience,projects:r?.projects,skills:r?.skills})}this.spinner.hide()},()=>{this.spinner.hide()})}submitProfile(){this.spinner.show(),this.userService.saveProfile(this.profileForm.value).subscribe(o=>{o?(this.toasterService.showToaster(m.NH.success,m.dF.save),this.getProfile(),this.authService.setUser({name:this.profileForm.value.name,profileId:this.profileId,profileSrc:this.profileSrc})):this.toasterService.showToaster(m.NH.warning,m.dF.errorMsg),this.spinner.hide()},()=>{this.spinner.hide()})}getErrorMsg(o,r=null){let i=null;return this.profileForm.get(o)?.errors?.required?i=this.validationMessage.required:this.profileForm.get(o)?.errors?.minlength?i=this.validationMessage.minLength.replace("$",r.toString()):this.profileForm.get(o)?.errors?.pattern&&(i=this.validationMessage.email),i}profilePhotoUpload(o){let r=o.target.files[0];if(r){const i=new FormData;i.append("file",r),this.spinner.show(),this.userService.fileUpload(i).subscribe(l=>{l&&l?.src&&(this.profileSrc=l.src,this.profileId=l?.profileId,this.authService.setUser({name:this.profileForm.value.name,profileId:l?.profileId,profileSrc:this.profileSrc})),this.uploadfile.nativeElement.value="",this.spinner.hide()})}}removeProfileImg(){this.profileId&&this.userService.deleteFile(this.profileId).subscribe(o=>{o&&(this.profileId=null,this.profileSrc=null,this.authService.setUser({name:this.profileForm.value.name,profileId:o?.profileId,profileSrc:this.profileSrc}))})}static{this.\u0275fac=function(r){return new(r||n)(e.rXU(d.u),e.rXU(u.W),e.rXU(t.ok),e.rXU(_.D),e.rXU(v.ex))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-profile"]],viewQuery:function(r,i){if(1&r&&e.GBs(g,5),2&r){let l;e.mGM(l=e.lsd())&&(i.uploadfile=l.first)}},standalone:!0,features:[e.aNF],decls:51,vars:14,consts:[["uploadfile",""],[1,"container","my-5"],[1,"card-body","p-4"],[1,"mb-4","heading_fw"],[1,"text-center","mb-4"],["for","profilePhoto",1,"form-label","d-block"],["alt","Profile Photo","id","profilePhotoPreview",1,"img-fluid","rounded-circle","profile_img",3,"imageId","imageSrc","defaultImage"],["type","file","id","profilePhoto","accept","image/*",1,"form-control","d-none",3,"change"],[1,"text-muted",3,"click","ngClass"],[3,"formGroup"],[1,"mb-3"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","id","name","placeholder","Enter the name","formControlName","name",1,"form-control"],["for","email",1,"form-label"],["type","text","id","email","placeholder","Enter the email","formControlName","email",1,"form-control"],["for","location",1,"form-label"],["type","text","id","location","placeholder","Enter the job location","formControlName","location",1,"form-control"],["for","exprience",1,"form-label"],["id","exprience","rows","5","placeholder","Provide a work exprience","formControlName","exprience",1,"form-control",3,"maxlength"],["for","projects",1,"form-label"],["id","projects","rows","5","placeholder","Provide a your project details","formControlName","projects",1,"form-control",3,"maxlength"],["for","skills",1,"form-label"],["id","skills","rows","5","placeholder","Provide a your skills","formControlName","skills",1,"form-control",3,"maxlength"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-primary",3,"click","ngClass"]],template:function(r,i){if(1&r){const l=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h2",3),e.EFF(3,"Profile"),e.k0s(),e.j41(4,"div",4)(5,"label",5),e.nrm(6,"img",6),e.k0s(),e.j41(7,"input",7,0),e.bIt("change",function(I){return e.eBV(l),e.Njj(i.profilePhotoUpload(I))}),e.k0s(),e.j41(9,"small",8),e.bIt("click",function(){return e.eBV(l),e.Njj(i.removeProfileImg())}),e.EFF(10),e.k0s()(),e.j41(11,"form",9)(12,"div",10)(13,"label",11),e.EFF(14,"Name "),e.j41(15,"span",12),e.EFF(16,"*"),e.k0s()(),e.nrm(17,"input",13),e.k0s(),e.j41(18,"div",10)(19,"label",14),e.EFF(20,"Email "),e.j41(21,"span",12),e.EFF(22,"*"),e.k0s()(),e.nrm(23,"input",15),e.k0s(),e.j41(24,"div",10)(25,"label",16),e.EFF(26,"Location "),e.j41(27,"span",12),e.EFF(28,"*"),e.k0s()(),e.nrm(29,"input",17),e.k0s(),e.j41(30,"div",10)(31,"label",18),e.EFF(32,"Exprience "),e.j41(33,"span",12),e.EFF(34,"*"),e.k0s()(),e.nrm(35,"textarea",19),e.k0s(),e.j41(36,"div",10)(37,"label",20),e.EFF(38,"Projects "),e.j41(39,"span",12),e.EFF(40,"*"),e.k0s()(),e.nrm(41,"textarea",21),e.k0s(),e.j41(42,"div",10)(43,"label",22),e.EFF(44,"Skills "),e.j41(45,"span",12),e.EFF(46,"*"),e.k0s()(),e.nrm(47,"textarea",23),e.k0s(),e.j41(48,"div",24)(49,"button",25),e.bIt("click",function(){return e.eBV(l),e.Njj(i.submitProfile())}),e.EFF(50,"Save Profile"),e.k0s()()()()()}2&r&&(e.R7$(6),e.Y8G("imageId",i.profileId)("imageSrc",i.profileSrc)("defaultImage","images/default-profile.png"),e.R7$(3),e.Y8G("ngClass",e.eq3(10,E,i.profileId)),e.R7$(),e.JRh(i.profileId?"Click here to remove photo":"Click on the photo to upload"),e.R7$(),e.Y8G("formGroup",i.profileForm),e.R7$(24),e.Y8G("maxlength",500),e.R7$(6),e.Y8G("maxlength",500),e.R7$(6),e.Y8G("maxlength",500),e.R7$(2),e.Y8G("ngClass",e.eq3(12,P,null==i.profileForm?null:i.profileForm.invalid)))},dependencies:[t.X1,t.qT,t.me,t.BC,t.cb,t.tU,t.j4,t.JD,p.MD,p.YU,h.x],styles:[".profile_img[_ngcontent-%COMP%]{width:150px;height:150px;object-fit:cover;cursor:pointer}.img_remove[_ngcontent-%COMP%]:hover{color:#ffc107!important}"]})}}return n})()}}]);